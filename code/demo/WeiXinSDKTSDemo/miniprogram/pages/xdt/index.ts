// 在你的页面的js文件中
// [91,99,94,85,92,93,87,91,86,88,87,86,90,92,88,97,88,89,87,86,85,89,101,122,90,84,88,86,87,90,91,92,93,85,88,95,90,90,88,101,96,92,90,92,86,85,95,89,84,96,255,85,77,84,84,76,82,85,87,89,83,88,83,81,86,91,82,94,84,79,90,83,87,88,86,82,83,87,91,88,82,86,91,89,95,79,76,88,84,90,81,83,78,82,83,82,79,84,86,82,83,255,81,83,85,86,83,80,89,69,78,78,88,88,89,86,88,89,85,86,87,79,84,77,89,81,79,86,83,84,90,81,82,78,83,82,86,90,86,90,85,89,83,79,86,94,76,79,80,81,255,79,86,78,80,77,80,83,80,83,85,80,77,82,79,80,81,80,88,92,81,89,73,86,78,80,83,86,93,87,90,78,83,84,83,89,87,85,80,89,79,83,91,83,82,84,88,89,83,80,94,80,86,87,83,93,86,83,92,88,84,86,90,87,88,86,88,83,92,91,86,89,87,89,86,90,86,95,99,89,94,92,87,78,82,88,91,89,92,88,87,90,87,96,92,94,90,86,90,93,93,88,93,84,88,92,86,84,81,89,93,86,89,90,87,86,91,89,87,84,88,85,88,89,91,89,85,94,86,92,91,91,87,88,93,97,105,87,89,84,91,96,89,97,105,90,92,88,94,98,84,82,76,81,79,86,84,75,81,91,86,81,79,89,81,90,84,88,96,94,92,94,90,86,93,89,92,94,96,90,85,95,93,91,89,81,79,81,82,87,83,87,90,91,95,81,82,85,86,85,255,83,81,85,82,77,79,75,83,80,81,79,77,81,83,87,79,74,83,82,81,85,80,76,79,83,81,75,77,80,79,78,77,83,84,78,83,78,80,84,89,85,79,73,85,86,89,81,78,83,78,84,81,80,83,88,85,81,80,75,84,81,78,86,77,80,76,75,74,76,67,78,80,78,80,84,88,78,78,84,82,87,85,86,78,77,85,81,77,79,81,77,78,79,88,86,82,85,81,80,78,80,84,82,81,80,85,79,81,76,81,82,78,77,76,73,74,85,88,81,84,88,90,90,92,85,90,88,83,82,84,86,89,82,83,80,88,85,81,83,82,78,82,90,87,85,88,93,86,84,80,84,80,76,78,91,89,86,87,84,90,81,77,85,80,87,85,81,78,85,83,85,81,80,85,80,85,81,83,84,86,85,82,80,85,81,85,82,83,82,85,82,80,85,81,88,87,83,79,81,85,88,83,91,90,92,85,84,82,84,83,82,83,91,84,80,78,82,83,79,82,85,86,83,80,84,82,79,81,82,80,81,85,84,82,80,83,79,83,78,84,88,82,80,86,83,81,78,80,81,86,78,84,80,79,88,81,87,84,85,84,81,82,86,80,77,79,81,83,81,83,82,76,84,89,85,80,81,82,81,84,79,81,84,81,85,83,88,81,86,85,82,84,87,75,78,84,78,77,80,86,89,79,75,85,82,80,85,79,85,82,89,88,85,87,83,82,85,84,87,84,83,81,77,86,89,88,82,80,83,83,78,81,82,90,91,82,85,82,85,88,84,87,92,83,87,88,83,81,84,82,84,79,77,82,88,87,81,79,82,77,82,78,77,81,79,81,76,82,88,83,79,79,78,76,83,79,76,83,82,90,88,85,87,85,80,82,85,83,86,83,81,89,83,88,77,83,82,85,80,81,83,78,81,84,79,81,79,82,78,81,77,81,78,81,80,79,77,78,85,79,77,77,85,84,86,80,90,81,81,82,79,80,78,84,81,77,81,83,78,84,86,84,78,84,87,86,92,80,81,78,79,76,80,84,78,73,80,85,89,83,79,82,79,78,81,76,83,80,84,75,79,85,82,79,81,82,74,77,80,78,81,78,83,75,76,82,77,82,83,78,80,82,84,80,81,84,79,78,76,78,82,86,84,82,78,83,81,84,83,80,76,81,79,85,78,77,75,84,77,81,77,85,82,86,89,78,87,82,77,76,79,89,85,79,80,82,85,81,79,76,82,77,80,74,82,80,84,77,74,91,76,79,80,78,83,90,94,84,77,84,80,75,85,83,77,79,77,83,84,81,72,79,87,76,90,93,88,87,91,93,84,89,86,97,95,91,90,89,88,89,92,93,92,90,86,88,89,90,91,96,90,86,82,85,86,88,86,87,88,83,84,87,91,83,86,83,79,80,76,84,85,80,86,82,76,78,79,84,90,84,91,91,84,79,75,78,77,88,90,85,88,86,76,78,84,74,84,76,79,90,89,79,76,75,88,87,77,80,72,83,73,76,72,77,75,83,76,78,85,70,69,76,72,80,84,78,80,87,80,81,76,74,75,92,95,73,79,88,89,91,95,91,79,78,86,81,94,85,82,88,83,80,91,93,83,81,79,82,79,74,74,83,87,78,85,79,89,87,78,83,81,75,83,80,85,81,78,76,78,79,80,81,78,74,79,80,78,76,80,87,83,81,82,78,84,89,86,83,80,85,76,87,79,83,91,85,79,82,79,80,82,84,84,83,86,89,86,84,82,81,79,83,84,83,81,85,87,82,80,77,81,82,85,82,83,78,82,81,80,85,83,81,85,87,78,84,86,81,84,85,80,84,81,80,86,84,83,86,78,85,86,85,81,83,81,77,77,86,82,83,76,82,86,82,80,79,81,82,81,82,81,85,80,78,76,79,83,80,81,84,80,79,78,79,81,80,83,77,81,78,81,80,76,78,91,82,80,81,82,81,83,82,80,76,78,81,79,84,81,82,85,82,85,90,81,87,80,78,80,79,77,83,79,82,77,82,81,80,81,85,82,83,88,78,80,94,80,81,77,79,82,83,81,84,75,71,74,67,75,72,76,87,81,85,83,78,78,87,78,80,79,81,79,80,83,87,84,82,88,79,81,82,83,82,81,82,81,82,80,82,81,78,83,84,82,84,82,80,79,81,78,84,80,79,86,83,79,83,80,83,78,80,86,87,89,81,84,85,87,91,87,81,78,81,76,81,80,76,82,78,80,83,81,80,83,79,80,76,86,87,78,76,74,81,80,81,79,82,87,79,80,81,88,77,78,77,84,79,81,80,79,81,81,83,88,83,81,79,81,78,81,80,83,80,85,83,85,81,83,80,81,82,83,84,80,79,80,84,86,81,81,80,76,80,78,80,81,80,79,74,79,83,79,78,93,84,81,83,76,80,86,77,79,78,82,78,83,78,80,78,75,82,85,77,76,84,87,81,82,78,75,80,78,76,84,81,86,77,80,83,75,78,79,81,76,74,81,80,82,74,76,78,75,77,84,80,84,78,82,77,80,77,79,77,74,79,84,77,78,77,79,77,84,80,76,77,85,75,77,80,79,85,82,78,77,79,75,85,84,87,83,84,78,76,78,79,81,80,76,78,75,77,75,87,79,81,77,83,82,85,77,82,79,82,75,78,77,78,75,84,83,87,79,77,81,85,82,84,76,75,85,83,76,77,75,85,84,82,77,76,83,79,83,76,79,82,80,77,76,255,76,80,81,86,77,78,73,76,78,75,80,84,76,79,80,76,80,84,75,77,83,75,82,74,79,87,76,79,82,77,80,71,75,76,79,81,79,73,78,80,76,83,78,78,80,79,77,72,80,70,82,79,86,88,89,82,80,83,76,82,83,82,77,79,86,78,77,78,75,87,76,80,81,85,83,84,80,81,79,80,83,81,77,80,76,74,76,82,81,79,77,83,78,80,77,81,69,73,74,70,75,78,76,81,69,83,77,72,73,77,76,86,69,66,71,75,76,69,67,70,65,78,74,81,74,79,67,69,81,79,69,67,68,72,68,74,67,71,73,77,74,69,76,69,81,68,72,70,64,93,255,75,72,71,91,83,68,78,72,79,86,73,77,76,73,70,78,65,82,70,72,80,74,68,67,65,73,78,76,71,73,81,87,79,94,86,84,86,84,90,91,88,85,88,87,89,91,84,89,92,81,90,95,87,79,85,87,92,87,93,91,85,90,84,91,95,90,91,87,84,86,88,83,91,85,89,93,87,92,83,82,89,86,88,86,89,91,95,87,89,83,82,88,85,82,91,89,85,89,85,89,86,82,80,78,87,80,93,87,90,83,90,72,86,87,78,76,84,77,72,89,72,69,85,89,93,84,79,88,85,81,79,89,82,87,83,81,73,75,78,83,90,75,70,87,84,81,90,92,88,92,88,86,85,87,92,84,81,87,86,87,73,79,80,81,86,80,90,78,67,79,84,89,80,83,82,77,82,72,73,78,80,83,84,77,75,84,78,76,71,69,73,71,88,79,77,75,90,86,87,89,82,72,82,91,86,88,82,78,76,78,82,77,75,75,78,81,83,82,79,73,75,77,78,79,76,82,84,77,75,72,76,82,71,79,93,81,86,81,77,91,79,77,78,92,75,87,94,84,82,78,84,88,78,74,76,71,76,81,88,92,80,84,78,84,85,74,87,78,82,89,92,86,83,85,80,89,82,86,92,90,82,78,75,85,79,74,72,75,81,77,87,82,76,79,77,81,76,77,79,84,81,94,99,88,87,88,93,84,85,89,83,80,73,89,88,79,81,85,86,82,81,76,74,82,81,77,82,78,79,84,81,80,78,83,92,88,82,83,81,85,87,84,82,77,85,88,83,81,79,83,87,84,82,77,85,87,84,85,83,82,87,83,85,86,85,84,85,83,79,85,84,85,87,95,89,83,85,83,90,88,86,89,81,85,83,82,85,82,85,86,80,79,84,82,83,87,86,81,85,82,84,86,83,86,90,81,83,86,83,82,77,79,81,83,84,83,82,83,89,82,85,83,79,85,84,83,82,86,83,82,84,85,83,85,82,81,80,82,89,86,83,85,84,83,82,88,82,84,85,84,81,82,89,90,83,90,87,85,83,81,80,87,84,88,87,81,84,86,85,87,86,87,86,88,82,83,84,85,80,84,85,87,85,82,83,89,90,85,82,85,81,83,85,83,86,81,82,82,78,79,86,78,84,88,91,87,80,85,83,81,82,81,87,79,80,82,88,84,82,77,76,83,88,86,83,82,87,89,83,80,81,83,89,88,82,83,86,82,81,84,82,78,79,86,82,78,82,81,78,82,84,82,80,87,82,79,81,87,84,78,85,83,84,89,79,84,81,83,77,78,86,80,86,84,89,85,82,88,84,79,78,83,85,86,83,81,78,82,81,80,79,82,86,81,90,88,83,88,83,84,88,81,83,91,92,90,91,87,84,90,86,84,82,88,89,83,81,84,79,88,82,86,80,86,85,74,71,85,88,92,93,87,88,92,83,89,90,86,87,92,87,83,89,86,87,81,89,88,82,77,79,83,85,80,83,78,85,85,80,84,90,84,83,80,85,80,81,79,81,82,81,85,79,83,105,87,86,96,97,87,84,86,88,89,87,86,87,85,84,82,83,81,84,83,82,83,78,86,85,91,84,86,87,93,86,87,86,89,88,85,91,85,81,88,89,86,88,76,80,81,73,74,89,88,81,86,81,82,76,83,76,84,90,84,83,81,87,83,82,84,79,81,83,77,84,91,91,87,84,83,84,80,78,80,85,86,84,81,89,78,86,80,83,81,79,92,95,83,93,89,92,87,89,83,82,86,90,92,83,88,87,88,90,89,86,93,87,92,96,87,85,93,95,104,91,95,91,88,88,101,95,106,90,86,92,98,91,94,89,87,117,86,90,85,89,99,147,89,94,87,101,153,130,89,133,100,102,101,91,98,117,114,91,82,109,148,86,93,90,87,107,89,86,93,82,85,91,87,91,91,81,90,79,85,91,85,93,87,86,84,83,82,90,83,81,86,87,90,73,67,70,88,89,87,94,92,88,85,80,85,83,90,92,88,87,89,91,83,75,82,80,79,81,83,85,90,88,89,73,79,82,86,84,93,87,84,83,79,88,81,84,89,88,86,83,87,84,81,78,76,83,82,83,88,77,86,89,83,80,78,80,79,82,76,95,77,80,78,80,80,79,88,78,84,78,74,89,72,80,82,84,70,76,89,80,87,82,79,84,80,74,79,72,85,77,70,73,86,84,83,93,85,83,84,78,81,74,85,86,85,90,88,81,83,84,85,86,72,73,81,82,80,77,76,79,79,87,81,67,76,84,87,85,86,85,87,82,91,87,89,91,77,78,72,69,68,67,84,70,73,65,75,78,70,77,74,67,81,66,65,69,75,67,69,64,66,68,67,63,67,68,67,65,68,75,67,64,73,67,84,73,75,73,76,75,79,83,74,84,83,74,82,89,91,85,87,91,88,86,93,85,86,82,81,94,83,78,81,78,85,70,87,78,79,76,88,79,76,82,79,81,75,80,80,81,74,77,82,90,89,82,83,76,83,87,85,78,77,82,83,78,80,86,78,83,82,71,78,82,85,88,84,82,84,85,79,89,80,90,87,85,89,82,88,90,82,93,91,86,89,91,86,89,90,104,87,90,113,93,101,87,98,88,91,89,92,125,94,86,107,94,87,92,85,80,92,88,90,86,88,86,82,83,73,68,85,87,89,90,86,83,79,81,87,94,90,88,79,84,76,81,85,86,74,75,86,82,83,93,84,87,93,90,91,87,91,88,85,90,92,86,87,94,89,93,91,87,95,86,89,95,93,109,86,85,95,83,91,91,134,97,98,99,94,98,99,100,112,87,97,90,89,86,83,96,94,97,95,94,86,90,93,88,89,88,87,93,89,87,89,86,91,81,80,86,90,85,84,89,90,92,83,88,82,85,88,85,80,84,91,88,86,88,90,82,88,83,77,85,77,83,88,86,82,95,90,87,85,75,92,91,87,88,84,83,85,89,88,83,79,87,95,88,85,74,82,90,81,75,81,83,87,89,83,85,81,80,79,82,79,74,78,84,78,77,73,77,75,74,77,73,79,77,72,73,80,83,86,75,77,74,77,75,82,78,72,70,83,78,76,72,76,81,76,82,72,67,80,82,77,79,72,79,76,79,81,83,87,75,74,75,79,87,91,74,86,85,76,74,80,77,81,76,80,91,76,75,78,90,77,82,83,92,94,87,81,77,81,76,78,79,81,73,79,80,81,76,73,90,89,83,89,87,85,88,79,92,90,88,92,87,93,76,80,80,86,87,88,83,87,82,83,84,85,76,82,83,86,91,84,88,92,80,78,79,76,79,80,81,90,84,82,85,81,86,79,81,78,90,84,86,80,84,86,77,85,76,78,75,78,80,83,86,83,75,72,71,81,79,82,80,84,88,81,87,75,73,85,81,84,77,81,81,88,81,79,82,81,83,92,85,86,81,87,86,83,78,84,81,80,77,74,86,81,77,82,88,89,82,84,79,76,74,79,86,87,79,93,81,76,75,79,81,74,76,75,77,74,76,88,94,84,78,86,78,86,79,82,81,82,72,82,84,83,80,81,84,86,74,86,75,74,81,87,88,76,86,83,90,76,75,85,75,77,73,76,91,81,80,76,75,80,84,79,78,83,86,80,76,80,86,85,80,86,87,73,81,81,86,76,83,86,73,75,84,77,90,85,75,76,76,82,84,87,75,88,81,79,84,75,78,79,87,82,81,87,84,83,81,82,90,85,71,84,87,80,76,77,76,73,78,79,73,80,74,84,73,83,71,73,72,81,74,79,93,76,81,77,78,75,88,80,78,85,72,77,80,72,85,94,88,83,84,71,78,90,78,85,77,75,83,84,87,91,83,90,89,69,78,61,82,84,86,88,87,82,83,89,83,82,81,77,82,79,77,85,86,80,85,78,82,81,87,78,82,86,78,77,74,76,82,70,71,83,89,85,81,76,75,77,78,83,85,88,80,79,76,79,78,84,77,76,77,75,78,76,75,73,76,78,81,85,77,76,78,75,72,78,85,84,79,78,83,81,80,84,82,81,86,83,81,80,79,77,80,84,81,79,85,79,88,84,81,85,86,83,80,82,92,81,80,78,82,91,85,81,80,83,81,84,79,78,76,75,74,77,79,87,83,81,80,77,80,86,83,79,81,77,76,80,77,92,85,88,94,93,95,85,97,91,90,89,94,87,90,94,88,86,96,90,94,88,94,91,83,88,95,86,86,89,91,87,92,88,93,85,90,93,84,90,82,92,91,87,89,88,82,89,88,86,82,90,89,90,88,89,88,83,87,86,84,90,89,91,86,90,90,88,91,84,94,85,90,93,92,82,78,89,92,89,88,87,77,90,91,88,90,86,91,89,87,91,97,89,91,86,88,94,88,91,89,87,92,88,90,95,88,86,88,84,87,92,76,87,92,86,90,88,84,80,89,88,93,87,82,90,85,84,91,90,89,87,76,91,86,92,84,78,91,83,85,92,89,87,91,91,92,94,84,90,90,88,93,92,87,93,83,91,95,90,84,90,87,84,91,93,89,85,84,92,95,93,97,86,90,84,91,100,89,87,82,92,97,84,82,86,79,80,88,83,84,87,77,84,74,82,79,89,73,82,86,88,81,78,80,92,84,91,93,81,90,84,81,87,86,93,90,87,83,79,78,86,79,89,90,88,90,87,83,85,86,83,76,80,79,78,88,92,87,91,87,90,83,91,89,85,78,81,76,78,77,86,73,69,70,81,71,88,76,80,74,71,70,69,76,69,74,75,73,77,71,75,80,93,88,87,89,88,84,79,81,83,96,87,86,90,89,88,85,80,85,83,86,79,78,91,80,84,93,90,86,81,80,78,85,81,83,73,72,83,77,79,78,77,71,86,80,77,73,77,86,79,82,85,82,79,82,79,80,83,81,78,77,81,85,77,75,85,68,69,68,72,81,74,70,68,69,73,70,67,65,68,73,77,69,72,70,68,72,71,81,71,67,88,77,82,79,84,74,88,86,87,91,86,85,82,88,81,84,87,83,92,85,77,74,81,79,69,78,79,77,89,79,76,82,89,86,90,78,74,76,77,80,84,79,82,86,80,79,73,81,83,74,72,79,82,78,73,71,85,78,78,71,72,83,73,88,74,70,76,81,82,78,89,74,81,85,73,85,82,81,82,75,88,75,81,76,83,84,78,75,79,88,78,86,91,75,77,83,76,83,78,81,85,74,75,85,88,90,84,78,86,87,88,90,90,85,89,82,76,89,84,75,83,81,85,82,79,85,89,86,77,83,76,81,89,80,78,87,80,86,87,90,80,87,88,81,87,84,88,90,82,77,71,78,84,80,86,93,85,76,81,77,87,82,81,90,81,76,71,78,74,81,82,75,90,79,73,69,75,83,78,74,75,70,74,86,77,81,74,68,68,70,69,77,80,67,73,70,78,79,82,75,74,72,78,80,83,86,82,80,95,90,91,93,90,85,89,84,88,85,87,85,83,84,91,85,89,87,84,81,88,83,79,77,81,77,88,89,88,85,82,78,84,77,82,90,91,86,93,89,84,83,84,78,74,73,76,83,84,86,83,86,81,86,82,80,79,81,82,84,87,82,86,85,90,81,77,81,84,82,79,83,88,86,85,84,79,78,83,84,81,86,82,83,86,84,88,92,88,86,90,96,84,91,90,86,85]


Page({
  data: {
    list: [139, 148, 158, 168, 176, 183, 190, 196, 201, 204, 204, 203, 198, 192, 182, 170, 156, 139, 120, 101, 80, 59, 37, 16, -4, -25, -44, -63, -81, -98, -112, -124, -135, -144, -151, -157, -161, -165, -168, -172, -176, -179, -182, -184, -186, -187, -187, -185, -183, -180, -177, -174, -171, -168, -165, -162, -160, -157, -154, -151, -147, -144, -141, -139, -137, -135, -133, -132, -132, -131, -130, -128, -126, -124, -122, -119, -116, -112, -109, -106, -102, -98, -94, -89, -84, -79, -74, -68, -63, -58, -53, -50, -48, -47, -47, -48, -51, -54, -58, -61, -64, -66, -68, -69, -69, -69, -71, -74, -78, -84, -89, -96, -103, -109, -111, -110, -103, -239, -145, -9, 160, 347, 533, 693, 805, 857, 846, 773, 643, 471, 276, 86, -72, -187, -225, -206, -187, -173, -163, -159, -162, -164, -161, -155, -147, -137, -129, -119, -103, -89, -79, -71, -66, -61, -52, -44, -38, -32, -24, -15, -3, 7, 16, 25, 34, 43, 54, 64, 74, 84, 96, 109, 123, 138, 152, 166, 181, 195, 209, 222, 233, 243, 251, 257, 261, 262, 260, 256, 249, 240, 227, 212, 195, 176, 156, 134, 111, 88, 67, 46, 27, 8, -8, -24, -37, -50, -61, -71, -80, -88, -94, -98, -101, -103, -105, -107, -107, -107, -107, -107, -106, -106, -104, -102, -99, -97, -94, -91, -87, -84, -81, -78, -75, -72, -69, -66, -63, -61, -59, -57, -56, -54, -53, -52, -52, -51, -50, -49, -47, -45, -44, -42, -40, -37, -35, -32],
    height: 300,
    width: 175,
    centerY: 150 // y轴中心作为绘画点，
  },

  onLoad: function () {
    // 获取canvas的上下文

    this.drawCurve();
    this.drawSmallGrid()
    let rr50 = [];
    for (let i = 0; i < hrvData.length; i++) {
      const val = hrvData[i];
      if (val >= 30 && val <= 210) {
        const object = val * 10;
        rr50.push(object);
      }
    }

    let r1Data = this.getRR1Data(rr50, 2);
    let score = this.getHRVScore(r1Data);
    console.log('score==>', score);
  },

  drawSmallGrid() {

    const ctx = wx.createCanvasContext('ecg')

    // 设置线条样式
    ctx.setStrokeStyle('#ececec') //
    ctx.setLineWidth(1) // 线条宽度

    // 将内容绘制到canvas上
    for (var x = 0.5; x < 375; x += 10) {
      ctx.moveTo(x, 0)
      // 结束点
      ctx.lineTo(x, 375)
      // 描边，不调用stroke则看不到画的内容
      ctx.stroke()
    }
    for (var y = 0.5; y < 375; y += 10) {
      ctx.moveTo(0, y)
      // 结束点
      ctx.lineTo(375, y)
      // 描边，不调用stroke则看不到画的内容
      ctx.stroke()   
    }
    ctx.draw()
    return;
  },

  drawCurve: function () {
    let ctx = wx.createCanvasContext('myCanvas', this)
    let list = this.data.list;
    let centerY = this.data.centerY;
    let width = this.data.width;
    let xScale = width / (list.length - 1); // 计算每个数据点占据的宽度
    let yScale = centerY / (Math.max(...list) - Math.min(...list))
    let x = 0;
    let y = centerY / 2 - (list[0] * yScale)
    ctx.beginPath();// 开始绘制
    ctx.moveTo(x, y);
    ctx.setStrokeStyle('#000000'); // 设置线条颜色
    ctx.setLineWidth(2); // 设置线条宽度
    for (let i = 1; i < list.length; i++) {
      let x = i * xScale;
      let y = centerY / 2 - ((list[i] / 2) * yScale); // 负数在中心下方，正数在中心上方
      ctx.lineTo(x, y);
    }


    ctx.stroke(); // 绘制线条
    ctx.draw(false); // 绘制到canvas上，不需要等待上一步绘制完成
  },

  //  hrv

  getHRVScore(rr2data: number[] | null): number {
    if (!rr2data || rr2data.length === 0) {
      return 0;
    }

    const hrvLength = rr2data.length - 1;
    if (hrvLength === 0) {
      return 0;
    }

    const hrvDiff: number[] = new Array(hrvLength);
    let validCount = 0;

    for (let i = 0; i < hrvLength; i++) {
      hrvDiff[i] = Math.abs(rr2data[i + 1] - rr2data[i]);
      if (hrvDiff[i] >= 7 && hrvDiff[i] <= 180) {
        validCount++;
      }
    }

    const score = Math.floor((validCount * 100) / hrvLength);
    return score;
  },


  getRR1Data(data: number[], averageLength: number) {
    if (averageLength > data.length) {
      return null;
    }

    const filterLength = data.length - averageLength + 1;
    const filterData: number[] = new Array(filterLength);

    for (let i = 0; i < filterLength; i++) {
      const sum = Math.floor(data[i]) + Math.floor(data[i + 1]);
      filterData[i] = sum >> 1; // 右移1位等于除以2（整数平均值）
    }

    return filterData;
  }
})